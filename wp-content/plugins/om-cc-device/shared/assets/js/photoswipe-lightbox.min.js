!function(t){"use strict";function a(){var a,e,s="<div>",o="<span>",p=[{type:"close",title:"Close (Esc)",icon:"ios-close"},{type:"share",title:"Share",icon:"android-share-alt"},{type:"fs",title:"Toggle fullscreen",icon:"ios-photos-outline"},{type:"zoom",title:"Zoom in/out",icon:"ios-plus-empty"}],l=t(s,{id:"om-cc-photoswipe","class":"pswp",tabindex:"-1",role:"dialog","aria-hidden":"true"}),n=t(s,{"class":"pswp__scroll-wrap"}).appendTo(l),r=t(s,{"class":"pswp__container"}).appendTo(n),i=t(s,{"class":"pswp__ui pswp__ui--hidden"}).appendTo(n),c=t(s,{"class":"pswp__top-bar"}).appendTo(i),d=t(s,{"class":"pswp__share-modal pswp__share-modal--hidden pswp__single-tap"}).appendTo(i),u=t(s,{"class":"pswp__caption"});for(t(s,{"class":"pswp__bg"}).prependTo(l),a=0;a<3;a++)t('<div class="pswp__item">').appendTo(r);for(t(s,{"class":"pswp__counter"}).prependTo(c),a=0;a<p.length;a++)e=p[a],t('<button class="pswp__button">').addClass("pswp__button--"+e.type+" ion-"+e.icon).attr("title",e.title).appendTo(c);return t('<div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div>').appendTo(c),t(s,{"class":"pswp__share-tooltip"}).prependTo(d),t('<button class="pswp__button">').addClass("pswp__button--arrow--left").attr("title","Previous").append(t(o).addClass("om-cc-arrow-left")).appendTo(i),t('<button class="pswp__button">').addClass("pswp__button--arrow--right").attr("title","Next").append(t(o).addClass("om-cc-arrow-right")).appendTo(i),u.appendTo(i),t(s,{"class":"pswp__caption"}).appendTo(u),l.appendTo("body"),l}function e(){if(!n){var e,s,o,p=t('meta[name="photoswipe"]'),l=[{id:"facebook",label:'<span class="ion-social-facebook"></span>',url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:'<span class="ion-social-twitter"></span>',url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:'<span class="ion-social-pinterest"></span>',url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"tumblr",label:'<span class="ion-social-tumblr"></span>',url:"http://tumblr.com/widgets/share/tool?canonicalUrl={{url}}"},{id:"google-plus",label:'<span class="ion-social-googleplus"></span>',url:"https://plus.google.com/share?url={{url}}"},{id:"vk",label:'<span class="ion-speakerphone"></span>',url:"http://vk.com/share.php?url={{url}}&image={{image_url}}"},{id:"reddit",label:'<span class="ion-social-reddit"></span>',url:"https://www.reddit.com/submit?url={{url}}"},{id:"download",label:'<span class="ion-arrow-down-c"></span>',url:"{{raw_image_url}}",download:!0}];if(p.length&&(s=p.prop("content"))&&(s=t.parseJSON(s),c.fullscreenEl=!!s.fullscreen&&!!s.fullscreen,c.zoomEl=!!s.zoom&&!!s.zoom,t.isPlainObject(s.share)))for(c.shareEl=!0,c.shareButtons=[],o=0;o<l.length;o++)e=l[o],e.id in s.share&&(e.label+=s.share[e.id],c.shareButtons.push(e));r=a(),n=r.get(0)}}function s(t){var a=t.data("selector"),e=t;return a&&(a=a.split("|"),e=t[a[0]].apply(t,Array.prototype.slice.call(a,1))),e}function o(a,e){var s=t(e),o=s.data("size").split("x"),p=parseInt(o[0]),l=parseInt(o[1]);return s.data("number",a),s.data("ratio",p/l),{src:s.data("item"),w:p,h:l,title:s.data("title")}}function p(a,e,p){var d=e.map(o).get(),u=p.data("number"),w=s(p),h=w.offset(),_=w.width(),g=w.height(),m=t.extend({galleryUID:a,index:u,getThumbBoundsFn:function(){return{x:h.left,y:h.top,w:_}},showHideOpacity:Math.abs(_/g-p.data("ratio"))>.03},c);l=new PhotoSwipe(n,PhotoSwipeUI_Default,d,m),l.init(),l.listen("preventDragEvent",function(t,a,e){clearTimeout(i),a?r.addClass("pswp-dragging"):i=setTimeout(function(){r.removeClass("pswp-dragging")},350)}),l.listen("beforeChange",function(t){r.removeClass("pswp-dragging")})}var l,n,r,i,c={captionEl:!0,shareEl:!1,fullscreenEl:!1,zoomEl:!1};t(function(){t("[data-om-cc-photoswipe]").each(function(a){var s=t(this);e(),s.on("click","[data-item]",function(e){e.preventDefault(),p(a+1,s.find("[data-item]"),t(this))})}),t(document).on("click","[data-om-cc-photoswipe-group]",function(a){a.preventDefault(),e();var s=t(this),o=s.data("om-cc-photoswipe-group");p("group-"+o,t('[data-om-cc-photoswipe-group="'+o+'"]'),s)}).on("click",".pswp__button--arrow--left,.pswp__button--arrow--right",function(a){var e=t(a.target);e.hasClass(".pswp__button")||e.parent(".pswp__button").trigger("click")});var a,s,o,l,n,r=t(window),i=location.hash;i&&(a=i.replace("#","").match(/&gid=([^&]+)&pid=([^&]+)/),t.isArray(a)&&3===a.length&&(s=a[1],o=a[2],/^group-/.test(s)?l=t('[data-om-cc-photoswipe-group="'+s.replace("group-","")+'"]'):t.isNumeric(s)&&s>=1&&(s=parseInt(s),l=t("[data-om-cc-photoswipe]:eq("+(s-1)+") [data-item]")),l&&l.length>=o&&(e(),n=l.eq(o-1),r.scrollTop(n.offset().top-r.height()/3),p(s,l,n))))})}(jQuery);